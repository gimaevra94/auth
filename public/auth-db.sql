CREATE TABLE id (
    id INT AUTO_INCREMENT,
    temporary VARCHAR(255) NOT NULL,
    permanent VARCHAR(255) NOT NULL UNIQUE PRIMARY KEY
) ENGINE=InNODB DEFAULT CHARSET=utf8mb4;

CREATE TABLE login (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    permanentId VARCHAR(255) NOT NULL,
    login VARCHAR(64) NOT NULL,
    cancelled BOOLEAN NOT NULL,
    FOREIGN KEY (permanentId) REFERENCES id (permanent) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;

CREATE TABLE email (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    permanentId VARCHAR(255) NOT NULL,
    email VARCHAR(128) NOT NULL,
    cancelled BOOLEAN NOT NULL,
    FOREIGN KEY (permanentId) REFERENCES id (permanent) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;

CREATE TABLE password (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    permanentId VARCHAR(255) NOT NULL,
    hash VARCHAR(255) NOT NULL,
    cancelled BOOLEAN NOT NULL,
    FOREIGN KEY (permanentId) REFERENCES id (permanent) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;

CREATE TABLE refresh_token (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    token VARCHAR(255) NOT NULL,
    permanentId VARCHAR(255) NOT NULL,
    userAgent VARCHAR(255) NOT NULL,
    cancelled BOOLEAN NOT NULL,
    FOREIGN KEY (permanentId) REFERENCES id (permanent) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;

CREATE TABLE reset_token (
    token VARCHAR(255) NOT NULL PRIMARY KEY,
    cancelled BOOLEAN NOT NULL,
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;